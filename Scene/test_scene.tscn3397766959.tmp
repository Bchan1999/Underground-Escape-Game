[gd_scene load_steps=21 format=4 uid="uid://bqpqo3aev1bi1"]

[ext_resource type="Script" uid="uid://chyskr0uqev1f" path="res://Scene/test_scene.gd" id="1_huixf"]
[ext_resource type="Texture2D" uid="uid://cmdfp7p387aqx" path="res://Assets/tile/Untitled_Artwork(5).png" id="3_nk2wp"]
[ext_resource type="Script" uid="uid://dr2ctym4mdogj" path="res://Scripts/tile_map_controller.gd" id="3_w5jy8"]
[ext_resource type="PackedScene" uid="uid://pqp7eql8gghl" path="res://Scene/character.tscn" id="4_huixf"]
[ext_resource type="PackedScene" uid="uid://e6fdae3032g3" path="res://Scene/rock.tscn" id="4_pyarj"]
[ext_resource type="Script" uid="uid://dyn7chbpnnwll" path="res://Scene/rock_map.gd" id="5_pyarj"]
[ext_resource type="PackedScene" uid="uid://cgd0ksnrtlb2y" path="res://Scene/enemy.tscn" id="5_xdm7g"]
[ext_resource type="Texture2D" uid="uid://cv0f3lnyn4o7d" path="res://Assets/rock/Untitled_Artwork(6).png" id="6_nk2wp"]
[ext_resource type="Texture2D" uid="uid://b3iunvm5alqna" path="res://Assets/tile/Untitled_Artwork(4).png" id="6_yg8v8"]
[ext_resource type="Texture2D" uid="uid://m06ne5b87ske" path="res://Assets/rock/Untitled_Artwork-5.png" id="7_cy2ab"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_nk2wp"]
texture = ExtResource("6_yg8v8")
margins = Vector2i(85, 50)
texture_region_size = Vector2i(305, 307)
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
5:4/0 = 0
6:4/0 = 0
5:5/0 = 0
6:5/0 = 0

[sub_resource type="TileSet" id="TileSet_cy2ab"]
tile_size = Vector2i(310, 310)
custom_data_layer_0/name = "center_coords"
custom_data_layer_0/type = 5
sources/0 = SubResource("TileSetAtlasSource_nk2wp")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_pyarj"]
texture = ExtResource("3_nk2wp")
margins = Vector2i(65, 50)
texture_region_size = Vector2i(310, 310)
4:4/0 = 0
4:2/0 = 0

[sub_resource type="TileSet" id="TileSet_nk2wp"]
tile_size = Vector2i(310, 310)
navigation_layer_0/layers = 1
custom_data_layer_0/name = "center_coords"
custom_data_layer_0/type = 5
sources/1 = SubResource("TileSetAtlasSource_pyarj")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_cy2ab"]
texture = ExtResource("6_nk2wp")
margins = Vector2i(20, 32)
texture_region_size = Vector2i(220, 220)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-110, -110, 110, -110, 110, 110, -110, 110)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_r624d"]
vertices = PackedVector2Array(110, 110, -110, 110, -110, -110, 110, -110)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-110, -110, 110, -110, 110, 110, -110, 110)])
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_iobcs"]
texture = ExtResource("7_cy2ab")
margins = Vector2i(20, 55)
texture_region_size = Vector2i(220, 220)
0:0/0 = 0
0:0/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_r624d")

[sub_resource type="TileSet" id="TileSet_r624d"]
tile_size = Vector2i(220, 220)
physics_layer_0/collision_layer = 1
navigation_layer_0/layers = 1
sources/0 = SubResource("TileSetAtlasSource_cy2ab")
sources/1 = SubResource("TileSetAtlasSource_iobcs")

[sub_resource type="TileSetScenesCollectionSource" id="TileSetScenesCollectionSource_nk2wp"]
scenes/1/scene = ExtResource("4_pyarj")

[sub_resource type="TileSet" id="TileSet_pyarj"]
tile_size = Vector2i(220, 220)
physics_layer_0/collision_layer = 1
navigation_layer_0/layers = 1
custom_data_layer_0/name = ""
custom_data_layer_0/type = 0
sources/1 = SubResource("TileSetScenesCollectionSource_nk2wp")

[node name="Main" type="Node2D"]
script = ExtResource("1_huixf")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(109, 97)
zoom = Vector2(2.38, 2.38)

[node name="Ground" type="TileMapLayer" parent="."]
scale = Vector2(0.115, 0.115)
tile_map_data = PackedByteArray("AAAAAAAAAAABAAAAAAAFAAAAAAADAAAAAAABAAAAAAACAAAAAAACAAAAAAACAAAAAAADAAAAAAACAAAAAAAEAAAAAAACAAAAAAAAAAEAAAABAAEAAAAAAAIAAAABAAEAAAAAAAMAAAABAAEAAAAAAAQAAAABAAEAAAABAAEAAAACAAEAAAACAAEAAAACAAEAAAADAAEAAAACAAEAAAAEAAEAAAACAAEAAAAEAAIAAAACAAEAAAAEAAMAAAACAAEAAAADAAMAAAACAAEAAAACAAMAAAACAAEAAAABAAMAAAACAAEAAAABAAIAAAACAAEAAAACAAIAAAACAAEAAAADAAIAAAACAAEAAAABAAQAAAACAAEAAAACAAQAAAACAAEAAAADAAQAAAACAAEAAAAEAAQAAAACAAEAAAAFAAEAAAADAAEAAAAFAAIAAAADAAEAAAAFAAMAAAADAAEAAAAFAAQAAAADAAEAAAAAAAUAAAABAAIAAAACAAUAAAACAAIAAAABAAUAAAACAAIAAAADAAUAAAACAAIAAAAEAAUAAAACAAIAAAAFAAUAAAADAAIAAAA=")
tile_set = SubResource("TileSet_cy2ab")

[node name="SelectTile" type="TileMapLayer" parent="."]
scale = Vector2(0.115, 0.115)
tile_map_data = PackedByteArray("AAAAAAAAAAABAAAAAAAFAAAAAAADAAAAAAABAAAAAAACAAAAAAACAAAAAAACAAAAAAADAAAAAAACAAAAAAAEAAAAAAACAAAAAAAAAAEAAAABAAEAAAAAAAIAAAABAAEAAAAAAAMAAAABAAEAAAAAAAQAAAABAAEAAAABAAEAAAACAAEAAAACAAEAAAACAAEAAAADAAEAAAACAAEAAAAEAAEAAAACAAEAAAAEAAIAAAACAAEAAAAEAAMAAAACAAEAAAADAAMAAAACAAEAAAACAAMAAAACAAEAAAABAAMAAAACAAEAAAABAAIAAAACAAEAAAACAAIAAAACAAEAAAADAAIAAAACAAEAAAABAAQAAAACAAEAAAACAAQAAAACAAEAAAADAAQAAAACAAEAAAAEAAQAAAACAAEAAAAFAAEAAAADAAEAAAAFAAIAAAADAAEAAAAFAAMAAAADAAEAAAAFAAQAAAADAAEAAAAAAAUAAAABAAIAAAACAAUAAAACAAIAAAABAAUAAAACAAIAAAADAAUAAAACAAIAAAAEAAUAAAACAAIAAAAFAAUAAAADAAIAAAA=")
tile_set = SubResource("TileSet_nk2wp")

[node name="TestNavLayer" type="TileMapLayer" parent="."]
visible = false
scale = Vector2(0.162, 0.162)
tile_map_data = PackedByteArray("AAADAAQAAAAAAAAAAAACAAQAAAAAAAAAAAABAAQAAAAAAAAAAAABAAMAAAAAAAAAAAACAAMAAAAAAAAAAAADAAMAAAAAAAAAAAAEAAMAAAAAAAAAAAADAAIAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAACAAAAAQAAAAAAAAADAAAAAQAAAAAAAAAEAAAAAQAAAAAAAAAFAAAAAQAAAAAAAAAAAAEAAQAAAAAAAAABAAEAAQAAAAAAAAACAAEAAQAAAAAAAAADAAEAAQAAAAAAAAAEAAEAAQAAAAAAAAAFAAEAAQAAAAAAAAAAAAIAAQAAAAAAAAABAAIAAQAAAAAAAAACAAIAAQAAAAAAAAAEAAIAAQAAAAAAAAAFAAIAAQAAAAAAAAAAAAMAAQAAAAAAAAAAAAQAAQAAAAAAAAAAAAUAAQAAAAAAAAABAAUAAQAAAAAAAAACAAUAAQAAAAAAAAADAAUAAQAAAAAAAAAEAAUAAQAAAAAAAAAFAAUAAQAAAAAAAAAFAAQAAQAAAAAAAAAEAAQAAQAAAAAAAAAFAAMAAQAAAAAAAAA=")
tile_set = SubResource("TileSet_r624d")

[node name="Rock" type="TileMapLayer" parent="."]
scale = Vector2(0.162, 0.162)
tile_map_data = PackedByteArray("AAACAAMAAQAAAAAAAQADAAMAAQAAAAAAAQACAAQAAQAAAAAAAQABAAQAAQAAAAAAAQABAAMAAQAAAAAAAQADAAIAAQAAAAAAAQAEAAMAAQAAAAAAAQADAAQAAQAAAAAAAQA=")
tile_set = SubResource("TileSet_pyarj")
script = ExtResource("5_pyarj")

[node name="Player" parent="." instance=ExtResource("4_huixf")]
position = Vector2(61, 52)

[node name="TileMapController" type="Node2D" parent="." node_paths=PackedStringArray("select_tile_map", "rock_map", "ground_map", "player", "enemy")]
script = ExtResource("3_w5jy8")
select_tile_map = NodePath("../SelectTile")
rock_map = NodePath("../Rock")
ground_map = NodePath("../Ground")
player = NodePath("../Player")
enemy = NodePath("../Enemy")

[node name="Spawn" type="Marker2D" parent="."]
position = Vector2(161, 53)

[node name="Enemy" parent="." node_paths=PackedStringArray("target", "tile_map_controller") instance=ExtResource("5_xdm7g")]
position = Vector2(18, 196)
target = NodePath("../Player")
tile_map_controller = NodePath("../TileMapController")

[connection signal="moved_pos" from="Player" to="TileMapController" method="_on_player_moved_pos"]
